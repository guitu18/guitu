package com.guitu18.mapping;

import com.guitu18.exception.MyException;

import java.lang.reflect.Method;
import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;

/**
 * HandlerMethodMapping
 *
 * @author zhangkuan
 * @date 2019/8/19
 */
public class HandlerMethodMapping {

    private static HandlerMethodMapping handlerMethodMapping = null;

    private Map<String, Method> methodMapping = new ConcurrentHashMap<>();

    private HandlerMethodMapping() {
    }

    /**
     * 获取单例实例
     *
     * @return
     */
    public static HandlerMethodMapping getInstance() {
        if (handlerMethodMapping == null) {
            synchronized (HandlerMethodMapping.class) {
                if (handlerMethodMapping == null) {
                    handlerMethodMapping = new HandlerMethodMapping();
                }
            }
        }
        return handlerMethodMapping;
    }


    public Method getMethod(String mapping) throws MyException {
        Method method = methodMapping.get(mapping);
        if (method == null) {
            throw new MyException("MethodMapping is not fund : " + mapping);
        }
        return method;
    }

    public void addMapping(String mapping, Method method) {
        methodMapping.put(mapping, method);
    }

}
